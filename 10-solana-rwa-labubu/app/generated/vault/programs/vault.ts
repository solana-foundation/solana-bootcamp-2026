/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  containsBytes,
  fixEncoderSize,
  getBytesEncoder,
  type Address,
  type ReadonlyUint8Array,
} from "@solana/kit";
import {
  type ParsedCreateLabubuMintInstruction,
  type ParsedInitializeCollectionInstruction,
  type ParsedMintRandomInstruction,
} from "../instructions";

export const VAULT_PROGRAM_ADDRESS =
  "6RSKyunojsMYHZQWzeP6SPGXnmZwjHAcPcbEumk7Cw2g" as Address<"6RSKyunojsMYHZQWzeP6SPGXnmZwjHAcPcbEumk7Cw2g">;

export enum VaultAccount {
  LabubuCollection,
}

export function identifyVaultAccount(
  account: { data: ReadonlyUint8Array } | ReadonlyUint8Array,
): VaultAccount {
  const data = "data" in account ? account.data : account;
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([89, 27, 35, 58, 149, 133, 239, 251]),
      ),
      0,
    )
  ) {
    return VaultAccount.LabubuCollection;
  }
  throw new Error(
    "The provided account could not be identified as a vault account.",
  );
}

export enum VaultInstruction {
  CreateLabubuMint,
  InitializeCollection,
  MintRandom,
}

export function identifyVaultInstruction(
  instruction: { data: ReadonlyUint8Array } | ReadonlyUint8Array,
): VaultInstruction {
  const data = "data" in instruction ? instruction.data : instruction;
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([195, 254, 82, 252, 212, 228, 251, 148]),
      ),
      0,
    )
  ) {
    return VaultInstruction.CreateLabubuMint;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([112, 62, 53, 139, 173, 152, 98, 93]),
      ),
      0,
    )
  ) {
    return VaultInstruction.InitializeCollection;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([72, 235, 182, 124, 22, 102, 103, 135]),
      ),
      0,
    )
  ) {
    return VaultInstruction.MintRandom;
  }
  throw new Error(
    "The provided instruction could not be identified as a vault instruction.",
  );
}

export type ParsedVaultInstruction<
  TProgram extends string = "6RSKyunojsMYHZQWzeP6SPGXnmZwjHAcPcbEumk7Cw2g",
> =
  | ({
      instructionType: VaultInstruction.CreateLabubuMint;
    } & ParsedCreateLabubuMintInstruction<TProgram>)
  | ({
      instructionType: VaultInstruction.InitializeCollection;
    } & ParsedInitializeCollectionInstruction<TProgram>)
  | ({
      instructionType: VaultInstruction.MintRandom;
    } & ParsedMintRandomInstruction<TProgram>);
